<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Post</title>
    <link rel="stylesheet" href="/style.css" />
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body
    class="bg-gray-900 text-white font-sans min-h-screen flex flex-col items-center justify-start py-6 sm:py-10 px-2"
  >
    <!-- Header -->
    <header class="mb-6 sm:mb-8 w-full max-w-lg text-center px-4">
      <h1 class="text-xl sm:text-3xl font-bold text-purple-400 mb-2">
        Edit Your Post ✏️
      </h1>
      <p class="text-gray-400 text-xs sm:text-base">
        Make changes and save your moment
      </p>
    </header>

    <!-- Edit Form -->
    <main
      class="w-full max-w-lg bg-gray-800 rounded-xl shadow-lg p-4 sm:p-6 border border-gray-700 mx-4 sm:mx-auto"
    >
      <h3
        class="font-semibold text-base sm:text-lg mb-4 text-center sm:text-left"
      >
        User: <span class="text-purple-400">@<%= post.user %></span>
      </h3>

      <form
        method="post"
        action="/posts/<%= post.id %>?_method=PATCH"
        class="flex flex-col gap-3 sm:gap-4"
        enctype="multipart/form-data"
      >
        <!-- Image Upload -->
        <label class="text-gray-300 font-medium text-sm sm:text-base"
          >Upload Image</label
        >
        <input
          type="file"
          name="imageFile"
          accept="image/*"
          onchange="previewImage(event)"
          class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-400 text-sm sm:text-base"
        />
        <img
          id="imagePreview"
          src="<%= post.imageUrl %>"
          alt="Post Image Preview"
          class="max-h-64 sm:max-h-96 rounded-lg mt-2 border border-gray-600 object-cover w-full"
        />

        <!-- Likes -->
        <label class="text-gray-300 font-medium text-sm sm:text-base"
          >Likes</label
        >
        <input
          type="number"
          name="likes"
          value="<%= post.likes %>"
          class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-400 text-sm sm:text-base"
        />

        <!-- Caption -->
        <label class="text-gray-300 font-medium text-sm sm:text-base"
          >Caption</label
        >
        <input
          type="text"
          name="caption"
          value="<%= post.caption %>"
          class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-400 text-sm sm:text-base"
        />

        <!-- Mood -->
        <label class="text-gray-300 font-medium text-sm sm:text-base"
          >Mood</label
        >
        <input
          type="text"
          name="mood"
          value="<%= post.mood %>"
          class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-400 text-sm sm:text-base"
        />

        <!-- Location -->
        <label class="text-gray-300 font-medium text-sm sm:text-base"
          >Location</label
        >
        <input
          type="text"
          name="location"
          value="<%= post.location %>"
          class="w-full px-2 sm:px-3 py-1.5 sm:py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-400 text-sm sm:text-base"
        />

        <!-- Buttons -->
        <div
          class="flex flex-col sm:flex-row sm:justify-between gap-2 sm:gap-4 mt-4"
        >
          <a
            href="/posts"
            class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-full shadow-md transition text-sm sm:text-base text-center"
          >
            Back
          </a>
          <button
            type="submit"
            class="bg-purple-600 hover:bg-purple-700 text-white px-4 sm:px-6 py-2 rounded-full shadow-lg font-semibold transition text-sm sm:text-base"
          >
            Update Post
          </button>
        </div>
      </form>
    </main>
    <script src="/script.js"></script>
  </body>
</html>
